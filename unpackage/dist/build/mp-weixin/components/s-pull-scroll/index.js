(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/s-pull-scroll/index"],{"3dbb":function(t,i,n){"use strict";n.r(i);var o=n("7610"),e=n.n(o);for(var s in o)"default"!==s&&function(t){n.d(i,t,(function(){return o[t]}))}(s);i["default"]=e.a},7610:function(t,i,n){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n={name:"s-pull-scroll",data:function(){return Object.assign(this,{pullType:"",scrollRealTop:0,preScrollY:0,clientNum:0,isExec:!1,scrollHeight:0,clientHeight:0,bodyHeight:0,windowTop:0,windowBottom:0,page:0,startPoint:null,lastPoint:null,startTop:0,maxTouchmoveY:0,inTouchend:!1,moveTime:0,moveTimeDiff:0,movetype:0,isMoveDown:!1}),{scrollId:"s-pull-scroll-view-id-"+Math.random().toString(36).substr(2),downHight:0,downRotate:0,downText:"",isDownReset:!1,isDownLoading:!1,isUpLoading:!1,isFinish:!1,isEmpty:!1,isError:!1,isShowBackTop:!1,scrollAble:!0,scrollTop:0,isShowFinishText:!1}},props:{customClass:{type:String,default:""},fixed:{type:Boolean,default:!0},top:{type:[Number,Array,String],default:function(){return 0}},bottom:{type:[Number,Array,String],default:function(){return 0}},loadingText:{type:String,default:"加载中 ..."},pullingText:{type:String,default:"下拉刷新"},loosingText:{type:String,default:"释放刷新"},finishText:{type:String,default:"暂无更多了"},emptyText:{type:String,default:"暂无数据"},errorText:{type:String,default:"加载失败，点击重新加载"},pullDown:Function,downOffset:{type:Number,default:100},downFps:{type:Number,default:40},downMinAngle:{type:Number,default:45},downInOffsetRate:{type:Number,default:1},downOutOffsetRate:{type:Number,default:.4},downStartTop:{type:Number,default:100},downBottomOffset:{type:Number,default:20},pullUp:Function,upOffset:{type:Number,default:160},backTop:Boolean,backTopOffset:{type:Number,default:1e3}},watch:{top:function(){this.refreshClientHeight()},bottom:function(){this.refreshClientHeight()}},computed:{numTop:function(){return(Array.isArray(this.top)?this.top:[this.top]).map((function(i){return t.upx2px(Number(i||0))})).reduce((function(t,i){return t+i}))||0},numBottom:function(){return(Array.isArray(this.bottom)?this.bottom:[this.bottom]).map((function(i){return t.upx2px(Number(i||0))})).reduce((function(t,i){return t+i}))||0},numBackTopOffset:function(){return t.upx2px(Number(this.backTopOffset||0))},numDownBottomOffset:function(){return t.upx2px(Number(this.downBottomOffset||0))},numDownStartTop:function(){return t.upx2px(Number(this.downStartTop||0))},numDownOffset:function(){return t.upx2px(Number(this.downOffset||0))},numUpOffset:function(){return t.upx2px(Number(this.upOffset||0))},fixedTop:function(){return this.fixed?this.numTop+this.windowTop+"px":0},padTop:function(){return this.fixed?0:this.numTop+"px"},fixedBottom:function(){return this.fixed?this.numBottom+this.windowBottom+"px":0},padBottom:function(){return this.fixed?0:this.numBottom+"px"},transition:function(){return this.isDownReset?"transform 300ms":""},translateY:function(){return this.downHight>0?"translateY("+this.downHight+"px)":""}},methods:{scroll:function(t){t=t.detail,this.scrollRealTop=t.scrollTop,this.scrollHeight=t.scrollHeight;var i=t.scrollTop-this.preScrollY>0;this.preScrollY=t.scrollTop,i&&this.triggerPullUp(!0),this.backTop&&(t.scrollTop>=this.numBackTopOffset?this.isShowBackTop=!0:this.isShowBackTop=!1)},touchstart:function(t){this.pullDown&&(this.startPoint=this.getPoint(t),this.startTop=this.scrollRealTop,this.lastPoint=this.startPoint,this.maxTouchmoveY=this.bodyHeight-this.numDownBottomOffset,this.inTouchend=!1)},touchmove:function(t){if(this.pullDown&&this.startPoint){var i=Date.now();if(!(this.moveTime&&i-this.moveTime<this.moveTimeDiff)){this.moveTime=i,this.moveTimeDiff=1e3/this.downFps;var n=this.scrollRealTop,o=this.getPoint(t),e=o.y-this.startPoint.y;if(e>0&&(n<=0||n<=this.numDownStartTop&&n===this.startTop)&&this.pullDown&&!this.inTouchend&&!this.isDownLoading&&!this.isUpLoading){var s=Math.abs(this.lastPoint.x-o.x),h=Math.abs(this.lastPoint.y-o.y),r=Math.sqrt(s*s+h*h);if(0!==r){var u=Math.asin(h/r)/Math.PI*180;if(u<this.downMinAngle)return}if(this.maxTouchmoveY>0&&o.y>=this.maxTouchmoveY)return this.inTouchend=!0,void this.touchend();this.preventDefault(t);var l=o.y-this.lastPoint.y;this.downHight<this.numDownOffset?(1!==this.movetype&&(this.movetype=1,this.scrollAble=!1,this.isDownReset=!1,this.isDownLoading=!1,this.downText=this.pullingText,this.isMoveDown=!0),this.downHight+=l*this.downInOffsetRate):(2!==this.movetype&&(this.movetype=2,this.scrollAble=!1,this.isDownReset=!1,this.isDownLoading=!1,this.downText=this.loosingText,this.isMoveDown=!0),this.downHight+=l>0?Math.round(l*this.downOutOffsetRate):l);var a=this.downHight/this.numDownOffset;this.downRotate="rotate("+360*a+"deg)"}this.lastPoint=o}}},touchend:function(t){if(this.pullDown)if(this.isMoveDown)this.downHight>=this.numDownOffset?this.triggerPullDown():(this.downHight=0,this.scrollAble=!0,this.isDownReset=!0,this.isDownLoading=!1),this.movetype=0,this.isMoveDown=!1;else if(this.scrollRealTop===this.startTop){var i=this.getPoint(t).y-this.startPoint.y<0;i&&this.triggerPullUp(!0)}},preventDefault:function(t){t&&t.cancelable&&!t.defaultPrevented&&t.preventDefault()},onBackTop:function(){this.isShowBackTop=!1,this.scrollTo(0)},onErrorClick:function(){this.isError=!1,"down"===this.pullType?this.triggerPullDown():"up"===this.pullType&&this.triggerPullUp()},scrollTo:function(t){var i=this;this.scrollTop=this.scrollRealTop,this.$nextTick((function(){i.scrollTop=t}))},getPoint:function(t){return t?t.touches&&t.touches[0]?{x:t.touches[0].pageX,y:t.touches[0].pageY}:t.changedTouches&&t.changedTouches[0]?{x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY}:{x:t.clientX,y:t.clientY}:{x:0,y:0}},getScrollBottom:function(){return this.scrollHeight-this.getClientHeight()-this.scrollRealTop},getClientHeight:function(t){var i=this.clientHeight||0;return 0===i&&!0!==t&&(i=this.bodyHeight),i},refreshClientHeight:function(){var i=this;this.isExec||(this.isExec=!0,this.$nextTick((function(){t.createSelectorQuery().in(i).select("#"+i.scrollId).boundingClientRect((function(t){i.isExec=!1,t?i.clientHeight=t.height:3!=i.clientNum&&(i.clientNum=0==i.clientNum?1:i.clientNum+1,setTimeout((function(){i.refreshClientHeight()}),100*i.clientNum))})).exec()})))},showDownLoading:function(){this.isEmpty=!1,this.isError=!1,this.isFinish=!1,this.isDownLoading=!0,this.downHight=this.numDownOffset,this.scrollAble=!0,this.isDownReset=!0,this.downText=this.loadingText},showUpLoading:function(){this.isEmpty=!1,this.isError=!1,this.isFinish=!1,this.isUpLoading=!0},hideDownLoading:function(){var t=this;this.$nextTick((function(){t.downHight=0,t.scrollAble=!0,t.isDownReset=!0,t.isDownLoading=!1,t.downHight=0,t.scrollHeight=0}))},hideUpLoading:function(){var t=this;this.$nextTick((function(){t.isUpLoading=!1}))},triggerPullDown:function(){!this.pullDown||this.isDownLoading||this.isUpLoading||(this.showDownLoading(),this.page=1,this.pullType="down",this.pullDown&&this.pullDown.call(this.$parent,this))},triggerPullUp:function(t){if(this.pullUp&&!this.isUpLoading&&!this.isDownLoading&&!this.isError&&!this.isFinish){if(t&&this.getScrollBottom()>this.numUpOffset)return;this.showUpLoading(),this.page++,this.pullType="up",this.pullUp&&this.pullUp.call(this.$parent,this),this.refreshClientHeight()}},refresh:function(){this.page=0,this.isEmpty=!1,this.isError=!1,this.isFinish=!1,this.isDownLoading=!1,this.isUpLoading=!1,this.scrollTo(0),this.pullDown?this.triggerPullDown():this.pullUp&&this.triggerPullUp()},success:function(){this.hideDownLoading(),this.hideUpLoading()},error:function(){this.hideDownLoading(),this.hideUpLoading(),this.page--,this.isError=!0},empty:function(){this.hideDownLoading(),this.hideUpLoading(),this.isEmpty=!0,this.isFinish=!0},finish:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.hideDownLoading(),this.hideUpLoading(),this.isFinish=!0,this.isShowFinishText=!!t}},created:function(){var i=this;t.getSystemInfo({success:function(t){t.windowTop&&(i.windowTop=t.windowTop),t.windowBottom&&(i.windowBottom=t.windowBottom),i.bodyHeight=t.windowHeight}})},mounted:function(){this.refreshClientHeight=this.refreshClientHeight.bind(this),t.onWindowResize(this.refreshClientHeight),this.refreshClientHeight()},beforeDestroy:function(){t.offWindowResize(this.refreshClientHeight)}};i.default=n}).call(this,n("543d")["default"])},"82b0":function(t,i,n){},"85be":function(t,i,n){"use strict";var o,e=function(){var t=this,i=t.$createElement;t._self._c;t._isMounted||(t.e0=function(t){return t.stopPropagation(),t.preventDefault(),function(t){return t.preventDefault()}(t)})},s=[];n.d(i,"b",(function(){return e})),n.d(i,"c",(function(){return s})),n.d(i,"a",(function(){return o}))},bfe4:function(t,i,n){"use strict";n.r(i);var o=n("85be"),e=n("3dbb");for(var s in e)"default"!==s&&function(t){n.d(i,t,(function(){return e[t]}))}(s);n("c041");var h,r=n("f0c5"),u=Object(r["a"])(e["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],h);i["default"]=u.exports},c041:function(t,i,n){"use strict";var o=n("82b0"),e=n.n(o);e.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/s-pull-scroll/index-create-component',
    {
        'components/s-pull-scroll/index-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("bfe4"))
        })
    },
    [['components/s-pull-scroll/index-create-component']]
]);
